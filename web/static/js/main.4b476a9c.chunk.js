(this.webpackJsonplang_json_editor=this.webpackJsonplang_json_editor||[]).push([[0],{31:function(e,n,t){},4:function(e,n){var t={ADD:"ADD",CHANGE_VALUE:"CHANGE_VALUE",REMOVE:"REMOVE",DATA_UPDATE:"DATA_UPDATE",MATCHES_UPDATE:"MATCHES_UPDATE"},a={add:function(e,n,a){return{action:t.ADD,parentId:e,type:n,label:a}},changeValue:function(e,n,a){return{action:t.CHANGE_VALUE,id:e,language:n,value:a}},remove:function(e){return{action:t.REMOVE,id:e}},dataUpdate:function(e){return{action:t.DATA_UPDATE,data:e}},matchesUpdate:function(e){return{action:t.MATCHES_UPDATE,data:e}}};e.exports={NodeType:{OBJECT:"OBJECT",VALUE:"VALUE"},ActionType:t,Action:a,MatchType:{EXACT:"exact",PARTIAL:"partial"}}},62:function(e,n,t){"use strict";t.r(n);var a,i=t(0),c=t.n(i),o=t(21),r=t.n(o),s=(t(31),t(2)),u=t(5),l=t(3),d=t(1);function f(){var e=Object(i.useMemo)((function(){return(new Date).getFullYear()}),[]);return Object(d.jsx)(b,{children:"\xa9 Pavel Zarecky, ".concat(e)})}var b=l.a.div(a||(a=Object(s.a)(["\n  padding-right: 15px;\n  text-align: end;\n"]))),j=t(6),p=t.n(j),g=t(4),m=t(9),O="MISSING",v="EMPTY",h="SAME",x="PLACEHOLDER_MISMATCH",y="NO_MATCH_IN_SOURCES",E="PARTIAL_MATCH_IN_SOURCES";function C(e){var n=e.match(/{{\w+}}/g);return n?Array.from(new Set(n.map((function(e){return e.substring(2,e.length-2)})))).sort():[]}function A(e,n,t,a){switch(e.type){case g.NodeType.VALUE:if(n.some((function(n){return void 0===e.values[n]||null===e.values[n]})))return a(e.id,O);if(n.some((function(n){return!e.values[n].trim()})))return a(e.id,v);if(t&&!t.some((function(n){var t=n.id,a=n.type;return t===e.id&&a===g.MatchType.EXACT}))&&!t.some((function(n){var t=n.id,a=n.type;return e.id.startsWith(t)&&a===g.MatchType.PARTIAL})))return a(e.id,y);if(Object.values(e.values).sort().some((function(e,n,t){return n&&e===t[n-1]})))return a(e.id,h);if(Object.values(e.values).map(C).some((function(e,n,t){return n&&!Object(m.isEqual)(e,t[n-1])})))return a(e.id,x);if(t&&!t.some((function(n){var t=n.id,a=n.type;return t===e.id&&a===g.MatchType.EXACT}))&&t.some((function(n){var t=n.id,a=n.type;return e.id.startsWith(t)&&a===g.MatchType.PARTIAL})))return a(e.id,E);break;case g.NodeType.OBJECT:if(!e.children.length)return a(e.id,v);e.children.forEach((function(e){return A(e,n,t,a)}));break;default:throw new Error("Invalid type: ".concat(e.type))}}function w(e,n,t){var a=[];return A(e,n,t,(function(e,n){a.push({id:e,problem:n})})),a}function k(e,n,t,a){function i(e){return t?e.includes(n):e.toLowerCase().includes(n.toLowerCase())}switch(e.type){case g.NodeType.VALUE:(i(e.id)||Object.values(e.values).some(i))&&a(e.id);break;case g.NodeType.OBJECT:!e.children.length&&i(e.id)&&a(e.id),e.children.forEach((function(e){return k(e,n,t,a)}));break;default:throw new Error("Invalid type: ".concat(e.type))}}function T(e,n,t){var a=[];return k(e,n,t,(function(e){a.push(e)})),a}var S,M,R,N=c.a.createContext({}),D=t(26),P=t.n(D),U=t.p+"static/media/add.d8693632.svg",L=t.p+"static/media/edit.962e7af9.svg",_=t.p+"static/media/confirm.0addefb3.svg",I=t.p+"static/media/cancel.caea72e4.svg",V=t.p+"static/media/trash.85c719f0.svg",H=t.p+"static/media/copy.2327b577.svg",B=t.p+"static/media/google-translate.0346cfbe.svg",J=l.a.span(S||(S=Object(s.a)(["\n  cursor: pointer;\n  vertical-align: middle;\n  padding: 0;\n  border: none;\n  background: none;\n  opacity: 0.5;\n  min-width: 1em;\n  margin: 0 3px;\n\n  &:hover {\n    opacity: 1;\n    font-weight: bold;\n  }\n\n  &:hover > * {\n    transform: scale(1.5, 1.5);\n  }\n"]))),F=t(25);function G(e){var n=e.operation,t=e.buttons,a=e.visible,i=void 0===a||a,c=e.copyString,o={opacity:i?1:0};return Object(d.jsxs)(q,{style:o,children:[n?Object(d.jsx)(Y,{children:Object(d.jsx)("img",{src:n.image,width:"16",alt:n.name})}):null,t.map((function(e){return e?Object(d.jsxs)(J,{onClick:function(n){e.callback(),n.stopPropagation()},title:e.name,children:[e.image?Object(d.jsx)("img",{src:e.image,width:"12",alt:e.name}):null,e.text?e.text:null]},e.name):null})),c?Object(d.jsx)(F.CopyToClipboard,{text:c,title:'copy "'.concat(c,'"'),children:Object(d.jsx)(J,{children:Object(d.jsx)("img",{src:H,width:"12",alt:"copy ".concat(c)})})}):null]})}function z(e){var n=e.visible,t=e.onAdd,a=e.onRemove,i=e.onEdit,c=e.copyString;return Object(d.jsx)(G,{visible:n,buttons:[t&&{name:"add",image:U,callback:t},a&&{name:"remove",image:V,callback:a},i&&{name:"edit",image:L,callback:i}],copyString:c})}function W(e){var n=e.onConfirm,t=e.onCancel,a=e.editMode,i=a?"edit":"remove";return Object(d.jsx)(G,{operation:{name:i,image:a?L:V},buttons:[{name:"confirm ".concat(i),image:_,callback:n},{name:"cancel ".concat(i),image:I,callback:t}]})}function X(e){var n=e.onObject,t=e.onValue,a=e.onCancel;return Object(d.jsx)(G,{operation:{name:"add",image:U},buttons:[{name:"section",text:"{}",callback:n},{name:"value",text:'""',callback:t},{name:"cancel",image:I,callback:a}]})}var q=l.a.div(M||(M=Object(s.a)(["\n  cursor: default;\n"]))),Y=l.a.span(R||(R=Object(s.a)(["\n  font-size: 10px;\n  opacity: 0.8;\n"]))),K=function(e){Object(i.useEffect)((function(){if(e){var n=function(n){27===n.keyCode&&e()};return window.addEventListener("keydown",n),function(){window.removeEventListener("keydown",n)}}}),[e])},Z="REMOVE_MODE",$="EDIT_MODE",Q="ADD_MODE",ee=function(e){var n=e.editing,t=e.visible,a=e.onAdd,c=e.onRemove,o=e.onConfirmEdit,r=e.onCancelEdit,s=e.onBeginEdit,l=e.copyString,f=Object(i.useState)(n?$:void 0),b=Object(u.a)(f,2),j=b[0],p=b[1];Object(i.useEffect)((function(){p(n?$:void 0)}),[n]);var m=function(e){for(var n=arguments.length,t=new Array(n>1?n-1:0),a=1;a<n;a++)t[a-1]=arguments[a];return function(){p(void 0),null===e||void 0===e||e.apply(void 0,t)}};switch(K(j&&m(j===$?r:void 0)),j){case Q:return Object(d.jsx)(X,{onObject:m(a,g.NodeType.OBJECT),onValue:m(a,g.NodeType.VALUE),onCancel:m()});case Z:case $:return Object(d.jsx)(W,{editMode:j===$,onConfirm:m(j===$?o:c),onCancel:m(j===$?r:void 0)});default:return Object(d.jsx)(z,{visible:t,copyString:l,onAdd:a&&function(){return p(Q)},onRemove:c&&function(){return p(Z)},onEdit:o&&function(){p($),null===s||void 0===s||s()}})}};ee.defaultProps={onBeginEdit:function(){}};var ne,te,ae,ie,ce,oe,re,se=ee,ue=t(10),le=t(14);function de(e){var n=e.text,t=e.fromLanguage,a=e.toLanguage,i=(e.onResult,"Open on GoogleTranslate");return Object(d.jsx)("a",{href:"https://translate.google.com/?sl=".concat(encodeURIComponent(t),"&tl=").concat(encodeURIComponent(a),"&text=").concat(encodeURIComponent(n)),target:"_blank",rel:"noreferrer",children:Object(d.jsx)(J,{title:i,children:Object(d.jsx)("img",{src:B,width:"12",alt:i})})})}function fe(e){var n=e.language,t=e.editing,a=e.value,c=e.onChange,o=e.onEdit,r=e.hint,s=e.highlight,l=Object(i.useState)(!1),f=Object(u.a)(l,2),b=f[0],j=f[1],p=Object(i.useState)(!1),g=Object(u.a)(p,2),m=g[0],O=g[1],v=Object(i.useState)(),h=Object(u.a)(v,2),x=h[0],y=h[1];Object(i.useEffect)((function(){t||(j(!1),O(!1))}),[t]);var E=Object(i.useCallback)((function(){return o(!1)}),[o]);return K(t&&E),Object(d.jsxs)(Ce,{value:a,children:[Object(d.jsx)(Ee,{children:n}),t?Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)(we,{style:x,onFocus:function(){return O(!0)},autoFocus:b,value:a||"",onChange:function(e){return c(e.target.value)},ref:function(e){e&&b&&e.select()}}),m&&r?Object(d.jsx)(de,{text:r.value,fromLanguage:r.language,toLanguage:n}):null]}):Object(d.jsx)(Ae,{value:a,highlight:s,title:s||null!==a&&void 0!==a&&!(null===a||void 0===a?void 0:a.trim())&&"\u26a0 Potential issue: Empty value"||"",onDoubleClick:function(){j(!0),o(!0)},ref:function(e){if(e){var n=e.offsetWidth,t=e.offsetHeight;(null===x||void 0===x?void 0:x.width)===n&&(null===x||void 0===x?void 0:x.height)===t||y({width:n,height:t})}},children:(null===a||void 0===a?void 0:a.trim())?a:null===a||void 0===a?"<missing>":'"'.concat(a,'"')})]})}function be(e){var n,t=e.node,a=Object(i.useState)(!1),c=Object(u.a)(a,2),o=c[0],r=c[1],s=Object(i.useState)(!1),l=Object(u.a)(s,2),f=l[0],b=l[1],j=Object(i.useState)(t.values),p=Object(u.a)(j,2),g=p[0],O=p[1],v=Object(i.useContext)(N),A=v.languages,w=v.onChangeValue,k=v.onRemove,T=v.problematicTranslations,S=v.disabled,M=Object(i.useCallback)((function(){O(t.values),b(!1)}),[t]);Object(i.useEffect)((function(){S&&M()}),[S,M]);var R=null===(n=T.find((function(e){return e.id===t.id})))||void 0===n?void 0:n.problem,D=R===y?"\u26a0 No match found in the sources":R===E?"\u26a0 Partial match in sourcefiles":"";return Object(d.jsxs)(he,{onMouseEnter:function(){return r(!0)},onMouseLeave:function(){return r(!1)},children:[Object(d.jsx)(xe,{title:D?"".concat(t.id,"\n").concat(D):t.id,problem:R,children:t.name}),Object(d.jsx)(ye,{children:A.map((function(e){var n=g[e],a=Object.keys(g).find((function(n){return n!==e&&g[n]})),i=R===h&&Object.keys(g).find((function(t){return t!==e&&g[t]===n}))||R===x&&Object.keys(g).find((function(t){return t!==e&&!Object(m.isEqual)(C(g[t]),C(n))})),c=i&&(R===h?'\u26a0 Potential issue: The same as the "'.concat(i,'" version'):'\u26a0 Potential issue: Different placeholders from the "'.concat(i,'" version'));return Object(d.jsx)(fe,{language:e,editing:f,hint:a&&{language:a,value:g[a]},value:n,highlight:c,onChange:function(n){return O(Object(le.a)(Object(le.a)({},g),{},Object(ue.a)({},e,n)))},onEdit:function(e){b(!S&&e),e||O(t.values)}},e)}))}),Object(d.jsx)(se,{visible:o,editing:f,onBeginEdit:!S&&function(){return b(!0)},onConfirmEdit:!S&&function(){A.forEach((function(e){var n=g[e];n!==t.values[e]&&w(t.id,e,n)})),b(!1)},onCancelEdit:!S&&M,onRemove:!S&&function(){k(t.id)},copyString:t.id})]})}var je,pe,ge,me,Oe,ve,he=l.a.div(ne||(ne=Object(s.a)(["\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n  margin-bottom: 2px;\n"]))),xe=l.a.div(te||(te=Object(s.a)(["\n  cursor: default;\n  background-color: ",";\n  font-family: monospace, monospace;\n  padding: 0 8px;\n  border: 0.5px solid black;\n  border-radius: 4px 0 0 4px;\n  display: flex;\n  align-items: center;\n  align-self: stretch;\n"])),(function(e){var n=e.problem;return n===O?"salmon":n===v?"moccasin":n===y?"lightgray":n===E?"darkseagreen":n?"lightcyan":"lightgreen"})),ye=l.a.div(ae||(ae=Object(s.a)([""]))),Ee=l.a.span(ie||(ie=Object(s.a)(["\n  cursor: default;\n  padding: 0 8px;\n  color: white;\n  background-color: black;\n"]))),Ce=l.a.div(ce||(ce=Object(s.a)(["\n  display: flex;\n  flex-direction: row;\n  font-family: monospace, monospace;\n"]))),Ae=l.a.div(oe||(oe=Object(s.a)(["\n  padding: 0 8px;\n  border: 0.5px solid black;\n  ","\n"])),(function(e){var n=e.value,t=e.highlight;return void 0===n||null===n?"background-color: red; color: white; font-style: italic; font-family: sans-serif, monospace;":n.trim()?t?"background-color: lightcyan;":"":"background-color: orange;"})),we=l.a.textarea(re||(re=Object(s.a)(["\n  font-size: 16px;\n"])));function ke(e){var n=e.node,t=Object(i.useState)(!n.id),a=Object(u.a)(t,2),c=a[0],o=a[1],r=Object(i.useState)(!1),s=Object(u.a)(r,2),l=s[0],f=s[1],b=Object(i.useState)(),j=Object(u.a)(b,2),p=j[0],m=j[1],x=Object(i.useState)(""),y=Object(u.a)(x,2),E=y[0],C=y[1],A=Object(i.useContext)(N),w=A.onAdd,k=A.onRemove,T=A.problematicTranslations,S=A.filteredIds,M=A.disabled,R=Object(i.useCallback)((function(){m(void 0),C("")}),[]);Object(i.useEffect)((function(){c&&!M||R()}),[M,c,R]),K(p&&R);var D=T.filter((function(e){return e.id.startsWith(n.id)})).map((function(e){return e.problem})),U=D.includes(O)?O:D.includes(v)?v:D.includes(h)?h:void 0,L=E&&/^\w+$/.test(E)&&!n.children.some((function(e){return e.name===E})),V=L?function(){w(n.id,p,E),R()}:void 0;return Object(d.jsxs)(d.Fragment,{children:[Object(d.jsxs)(Pe,{onClick:function(){return o((function(e){return!e}))},onMouseEnter:function(){return f(!0)},onMouseLeave:function(){return f(!1)},children:[Object(d.jsxs)(Le,{id:n.id,problem:U,expanded:c,title:n.id,children:[Object(d.jsx)(Ue,{children:c?"-":"+"}),n.name]}),c?!p&&!M&&Object(d.jsx)(se,{visible:l,onAdd:function(e){return m(e)},onRemove:n.id&&function(){return k(n.id)}}):Object(d.jsx)(_e,{children:"{} ".concat(n.children.length," item").concat(1===n.children.length?"":"s")})]}),p?Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)(Ve,{type:"text",autoFocus:!0,placeholder:p===g.NodeType.OBJECT?"new section":"new value",onChange:function(e){return C(e.target.value.trim())},onKeyPress:function(e){return"Enter"===e.key&&(null===V||void 0===V?void 0:V())}}),L?Object(d.jsx)(J,{onClick:V,children:Object(d.jsx)("img",{src:_,width:"16",alt:"confirm"})}):null,Object(d.jsx)(J,{onClick:R,children:Object(d.jsx)("img",{src:I,width:"16",alt:"cancel"})})]}):null,Object(d.jsx)(Ie,{children:Object(d.jsx)(P.a,{expanded:c,children:n.children.map((function(e){return S&&!S.some((function(n){return n===e.id||n.startsWith("".concat(e.id,"."))}))?null:e.type===g.NodeType.OBJECT?Object(d.jsx)(ke,{node:e},e.id):Object(d.jsx)(be,{node:e},e.id)}))})})]})}var Te,Se,Me,Re,Ne,De,Pe=l.a.div(je||(je=Object(s.a)(["\n  cursor: default;\n  position: relative;\n  display: flex;\n  flex-direction: row;\n"]))),Ue=l.a.span(pe||(pe=Object(s.a)(["\n  min-width: 10px;\n  margin-right: 2px;\n"]))),Le=l.a.span(ge||(ge=Object(s.a)(["\n  background-color: ",";\n  font-family: monospace, monospace;\n  padding: 0 8px;\n  border: 0.5px solid black;\n  border-radius: 4px;\n\n  &:hover {\n    font-weight: bold;\n  }\n"])),(function(e){var n=e.id,t=e.problem,a=e.expanded;if(!n)return"white";switch(t){case O:return a?"pink":"salmon";case v:return a?"white":"moccasin";case h:return a?"white":"lightcyan";default:return a?"mintcream":"lightgreen"}})),_e=l.a.span(me||(me=Object(s.a)(["\n  color: grey;\n  margin: 0 8px;\n"]))),Ie=l.a.div(Oe||(Oe=Object(s.a)(["\n  padding-left: 20px;\n  margin-bottom: 4px;\n"]))),Ve=l.a.input(ve||(ve=Object(s.a)(["\n  font-family: monospace, monospace;\n  font-size: 16px;\n  padding: 0 8px;\n  margin-left: 20px;\n  margin-bottom: 4px;\n"])));function He(e){var n=e.data,t=e.matches,a=e.filter,c=a.text,o=a.caseSensitive,r=e.onSendMessage,s=e.disabled,l=Object(i.useState)(n),f=Object(u.a)(l,2),b=f[0],j=f[1];Object(i.useEffect)((function(){j(n)}),[n]);var p=Object(i.useState)([]),m=Object(u.a)(p,2),O=m[0],v=m[1];Object(i.useEffect)((function(){var e;(null===b||void 0===b||null===(e=b.languages)||void 0===e?void 0:e.length)&&v(w(b.content,b.languages,t))}),[t,b]);var h=Object(i.useState)(),x=Object(u.a)(h,2),y=x[0],E=x[1];return Object(i.useEffect)((function(){b&&c?E(T(b.content,c,o)):E()}),[o,c,b]),Object(d.jsx)(N.Provider,{value:{disabled:s,filteredIds:y,problematicTranslations:O,languages:null===b||void 0===b?void 0:b.languages,onAdd:function(e,n,t){return r(g.Action.add(e,n,t))},onChangeValue:function(e,n,t){return r(g.Action.changeValue(e,n,t))},onRemove:function(e){return r(g.Action.remove(e))}},children:b?Object(d.jsx)(ke,{node:b.content}):null})}function Be(){var e=function(){var e=new URL(window.location.href),n=e.searchParams.get("serverPort")||e.port;return"".concat(e.hostname,":").concat(n)}(),n=Object(i.useState)(!1),t=Object(u.a)(n,2),a=t[0],c=t[1],o=Object(i.useState)(""),r=Object(u.a)(o,2),s=r[0],l=r[1],b=Object(i.useState)(),m=Object(u.a)(b,2),O=m[0],v=m[1],h=Object(i.useState)(),x=Object(u.a)(h,2),y=x[0],E=x[1],C=Object(i.useCallback)((function(e){switch(e.action){case g.ActionType.DATA_UPDATE:E(e.data);break;case g.ActionType.MATCHES_UPDATE:v(e.data);break;default:console.error("Invalid action:",e.action)}}),[]),A=p()("ws://".concat(e),{retryOnError:!0,shouldReconnect:function(){return!0},reconnectAttempts:100,onMessage:function(e){return C(JSON.parse(e.data))}}),w=A.sendMessage,k=A.readyState,T=Object(i.useCallback)((function(){switch(k){case j.ReadyState.OPEN:return"Connected";case j.ReadyState.CONNECTING:return"Connecting";case j.ReadyState.CLOSED:return"Server not reachable";default:return"Unknown"}}),[k]),S=Object(i.useCallback)((function(e){w(JSON.stringify(e))}),[w]);return Object(i.useEffect)((function(){k===j.ReadyState.OPEN&&fetch("http://".concat(e,"/data")).then((function(e){return e.json()})).then(E)}),[k,e]),Object(d.jsxs)(Je,{children:[Object(d.jsxs)(Fe,{children:[Object(d.jsx)(Xe,{status:k,children:T()}),Object(d.jsx)(Ge,{children:Object(d.jsxs)("span",{children:["Filter:"," ",Object(d.jsx)(ze,{onChange:function(e){return l(e.target.value.trim())}}),Object(d.jsx)("input",{type:"checkbox",name:"case sensitive",checked:a,onChange:function(e){return c(e.target.checked)}}),"case sensitive"]})})]}),Object(d.jsxs)(We,{children:[!y&&"No data",Object(d.jsx)(He,{data:y,matches:O,filter:{text:s,caseSensitive:a},onSendMessage:S,disabled:k!==j.ReadyState.OPEN})]}),Object(d.jsx)(f,{})]})}var Je=l.a.div(Te||(Te=Object(s.a)(['\n  background-color: #ffffff;\n  display: flex;\n  flex-direction: column;\n  min-height: 100vh;\n\n  font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", "Roboto", "Oxygen",\n    "Ubuntu", "Cantarell", "Fira Sans", "Droid Sans", "Helvetica Neue",\n    sans-serif;\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n  font-weight: 400;\n']))),Fe=l.a.div(Se||(Se=Object(s.a)(["\n  width: 100vw;\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n"]))),Ge=l.a.div(Me||(Me=Object(s.a)(["\n  flex: 1;\n  display: flex;\n  justify-content: space-around;\n"]))),ze=l.a.input(Re||(Re=Object(s.a)(["\n  font-family: monospace, monospace;\n  font-size: 16px;\n  padding: 0 8px;\n  margin-horizontal: 20px;\n  min-width: min(50vw, 400px);\n"]))),We=l.a.div(Ne||(Ne=Object(s.a)(["\n  flex: 1;\n  min-width: 800px;\n  max-width: 95vw;\n  margin: 0 40px;\n  padding-top: 15px;\n  flex-direction: column;\n  align-items: center;\n"]))),Xe=l.a.span(De||(De=Object(s.a)(["\n  color: ",";\n"])),(function(e){var n=e.status;return n===j.ReadyState.OPEN?"darkgreen":n===j.ReadyState.CONNECTING?"black":"darkred"}));r.a.render(Object(d.jsx)(c.a.StrictMode,{children:Object(d.jsx)(Be,{})}),document.getElementById("root"))}},[[62,1,2]]]);
//# sourceMappingURL=main.4b476a9c.chunk.js.map