(this.webpackJsonplang_json_editor=this.webpackJsonplang_json_editor||[]).push([[0],{31:function(n,e,t){},5:function(n,e){var t={ADD:"ADD",CHANGE_VALUE:"CHANGE_VALUE",REMOVE:"REMOVE",DATA_UPDATE:"DATA_UPDATE"},a={add:function(n,e,a){return{action:t.ADD,parentId:n,type:e,label:a}},changeValue:function(n,e,a){return{action:t.CHANGE_VALUE,id:n,language:e,value:a}},remove:function(n){return{action:t.REMOVE,id:n}},dataUpdate:function(n){return{action:t.DATA_UPDATE,data:n}}};n.exports={NodeType:{OBJECT:"OBJECT",VALUE:"VALUE"},ActionType:t,Action:a}},62:function(n,e,t){"use strict";t.r(e);var a,c=t(0),i=t.n(c),o=t(21),r=t.n(o),l=(t(31),t(2)),u=t(4),s=t(3),d=t(1);function b(){var n=Object(c.useMemo)((function(){return(new Date).getFullYear()}),[]);return Object(d.jsx)(f,{children:"\xa9 Pavel Zarecky, ".concat(n)})}var f=s.a.div(a||(a=Object(l.a)(["\n  padding-right: 15px;\n  text-align: end;\n"]))),j=t(6),g=t.n(j),m=t(5),O=t(9),v="MISSING",p="EMPTY",h="SAME",x="PLACEHOLDER_MISMATCH";function y(n){var e=n.match(/{{\w+}}/g);return e?Array.from(new Set(e.map((function(n){return n.substring(2,n.length-2)})))).sort():[]}function E(n,e,t){switch(n.type){case m.NodeType.VALUE:if(e.some((function(e){return void 0===n.values[e]||null===n.values[e]})))return t(n.id,v);if(e.some((function(e){return!n.values[e].trim()})))return t(n.id,p);if(Object.values(n.values).sort().some((function(n,e,t){return e&&n===t[e-1]})))return t(n.id,h);if(Object.values(n.values).map(y).some((function(n,e,t){return e&&!Object(O.isEqual)(n,t[e-1])})))return t(n.id,x);break;case m.NodeType.OBJECT:if(!n.children.length)return t(n.id,p);n.children.forEach((function(n){return E(n,e,t)}));break;default:throw new Error("Invalid type: ".concat(n.type))}}function C(n,e){var t=[];return E(n,e,(function(n,e){t.push({id:n,problem:e})})),t}var k,w,A,S=i.a.createContext({}),T=t(26),R=t.n(T),D=t.p+"static/media/add.d8693632.svg",M=t.p+"static/media/edit.962e7af9.svg",N=t.p+"static/media/confirm.0addefb3.svg",P=t.p+"static/media/cancel.caea72e4.svg",L=t.p+"static/media/trash.85c719f0.svg",U=t.p+"static/media/copy.2327b577.svg",V=t.p+"static/media/google-translate.0346cfbe.svg",_=s.a.span(k||(k=Object(l.a)(["\n  cursor: pointer;\n  vertical-align: middle;\n  padding: 0;\n  border: none;\n  background: none;\n  opacity: 0.5;\n  min-width: 1em;\n  margin: 0 3px;\n\n  &:hover {\n    opacity: 1;\n    font-weight: bold;\n  }\n\n  &:hover > * {\n    transform: scale(1.5, 1.5);\n  }\n"]))),I=t(25);function B(n){var e=n.operation,t=n.buttons,a=n.visible,c=void 0===a||a,i=n.copyString,o={opacity:c?1:0};return Object(d.jsxs)(H,{style:o,children:[e?Object(d.jsx)(z,{children:Object(d.jsx)("img",{src:e.image,width:"16",alt:e.name})}):null,t.map((function(n){return n?Object(d.jsxs)(_,{onClick:function(e){n.callback(),e.stopPropagation()},title:n.name,children:[n.image?Object(d.jsx)("img",{src:n.image,width:"12",alt:n.name}):null,n.text?n.text:null]},n.name):null})),i?Object(d.jsx)(I.CopyToClipboard,{text:i,title:'copy "'.concat(i,'"'),children:Object(d.jsx)(_,{children:Object(d.jsx)("img",{src:U,width:"12",alt:"copy ".concat(i)})})}):null]})}function J(n){var e=n.visible,t=n.onAdd,a=n.onRemove,c=n.onEdit,i=n.copyString;return Object(d.jsx)(B,{visible:e,buttons:[t&&{name:"add",image:D,callback:t},a&&{name:"remove",image:L,callback:a},c&&{name:"edit",image:M,callback:c}],copyString:i})}function F(n){var e=n.onConfirm,t=n.onCancel,a=n.editMode,c=a?"edit":"remove";return Object(d.jsx)(B,{operation:{name:c,image:a?M:L},buttons:[{name:"confirm ".concat(c),image:N,callback:e},{name:"cancel ".concat(c),image:P,callback:t}]})}function G(n){var e=n.onObject,t=n.onValue,a=n.onCancel;return Object(d.jsx)(B,{operation:{name:"add",image:D},buttons:[{name:"section",text:"{}",callback:e},{name:"value",text:'""',callback:t},{name:"cancel",image:P,callback:a}]})}var H=s.a.div(w||(w=Object(l.a)(["\n  cursor: default;\n"]))),z=s.a.span(A||(A=Object(l.a)(["\n  font-size: 10px;\n  opacity: 0.8;\n"]))),q=function(n){Object(c.useEffect)((function(){if(n){var e=function(e){27===e.keyCode&&n()};return window.addEventListener("keydown",e),function(){window.removeEventListener("keydown",e)}}}),[n])},W="REMOVE_MODE",Y="EDIT_MODE",K="ADD_MODE",Z=function(n){var e=n.editing,t=n.visible,a=n.onAdd,i=n.onRemove,o=n.onConfirmEdit,r=n.onCancelEdit,l=n.onBeginEdit,s=n.copyString,b=Object(c.useState)(e?Y:void 0),f=Object(u.a)(b,2),j=f[0],g=f[1];Object(c.useEffect)((function(){g(e?Y:void 0)}),[e]);var O=function(n){for(var e=arguments.length,t=new Array(e>1?e-1:0),a=1;a<e;a++)t[a-1]=arguments[a];return function(){g(void 0),null===n||void 0===n||n.apply(void 0,t)}};switch(q(j&&O(j===Y?r:void 0)),j){case K:return Object(d.jsx)(G,{onObject:O(a,m.NodeType.OBJECT),onValue:O(a,m.NodeType.VALUE),onCancel:O()});case W:case Y:return Object(d.jsx)(F,{editMode:j===Y,onConfirm:O(j===Y?o:i),onCancel:O(j===Y?r:void 0)});default:return Object(d.jsx)(J,{visible:t,copyString:s,onAdd:a&&function(){return g(K)},onRemove:i&&function(){return g(W)},onEdit:o&&function(){g(Y),null===l||void 0===l||l()}})}};Z.defaultProps={onBeginEdit:function(){}};var $,Q,X,nn,en,tn,an,cn=Z,on=t(10),rn=t(14);function ln(n){var e=n.text,t=n.fromLanguage,a=n.toLanguage,c=(n.onResult,"Open on GoogleTranslate");return Object(d.jsx)("a",{href:"https://translate.google.com/?sl=".concat(encodeURIComponent(t),"&tl=").concat(encodeURIComponent(a),"&text=").concat(encodeURIComponent(e)),target:"_blank",rel:"noreferrer",children:Object(d.jsx)(_,{title:c,children:Object(d.jsx)("img",{src:V,width:"12",alt:c})})})}function un(n){var e=n.language,t=n.editing,a=n.value,i=n.onChange,o=n.onEdit,r=n.hint,l=n.highlight,s=Object(c.useState)(!1),b=Object(u.a)(s,2),f=b[0],j=b[1],g=Object(c.useState)(!1),m=Object(u.a)(g,2),O=m[0],v=m[1],p=Object(c.useState)(),h=Object(u.a)(p,2),x=h[0],y=h[1];Object(c.useEffect)((function(){t||(j(!1),v(!1))}),[t]);var E=Object(c.useCallback)((function(){return o(!1)}),[o]);return q(t&&E),Object(d.jsxs)(xn,{value:a,children:[Object(d.jsx)(hn,{children:e}),t?Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)(En,{style:{width:x},onFocus:function(){return v(!0)},autoFocus:f,value:a||"",onChange:function(n){return i(n.target.value)}}),O&&r?Object(d.jsx)(ln,{text:r.value,fromLanguage:r.language,toLanguage:e}):null]}):Object(d.jsx)(yn,{value:a,highlight:l,title:l||null!==a&&void 0!==a&&!(null===a||void 0===a?void 0:a.trim())&&"\u26a0 Potential issue: Empty value",onDoubleClick:function(){j(!0),o(!0)},ref:function(n){n&&y(n.offsetWidth)},children:(null===a||void 0===a?void 0:a.trim())?a:null===a||void 0===a?"<missing>":'"'.concat(a,'"')})]})}function sn(n){var e,t=n.node,a=Object(c.useState)(!1),i=Object(u.a)(a,2),o=i[0],r=i[1],l=Object(c.useState)(!1),s=Object(u.a)(l,2),b=s[0],f=s[1],j=Object(c.useState)(t.values),g=Object(u.a)(j,2),m=g[0],v=g[1],p=Object(c.useContext)(S),E=p.languages,C=p.onChangeValue,k=p.onRemove,w=p.problematicTranslations,A=p.disabled,T=Object(c.useCallback)((function(){v(t.values),f(!1)}),[t]);Object(c.useEffect)((function(){A&&T()}),[A,T]);var R=null===(e=w.find((function(n){return n.id===t.id})))||void 0===e?void 0:e.problem;return Object(d.jsxs)(On,{onMouseEnter:function(){return r(!0)},onMouseLeave:function(){return r(!1)},children:[Object(d.jsx)(vn,{title:t.id,problem:R,children:t.name}),Object(d.jsx)(pn,{children:E.map((function(n){var e=m[n],a=Object.keys(m).find((function(e){return e!==n&&m[e]})),c=R===h&&Object.keys(m).find((function(t){return t!==n&&m[t]===e}))||R===x&&Object.keys(m).find((function(t){return t!==n&&!Object(O.isEqual)(y(m[t]),y(e))})),i=c&&(R===h?'\u26a0 Potential issue: The same as the "'.concat(c,'" version'):'\u26a0 Potential issue: Different placeholders from the "'.concat(c,'" version'));return Object(d.jsx)(un,{language:n,editing:b,hint:a&&{language:a,value:m[a]},value:e,highlight:i,onChange:function(e){return v(Object(rn.a)(Object(rn.a)({},m),{},Object(on.a)({},n,e)))},onEdit:function(n){f(!A&&n),n||v(t.values)}},n)}))}),Object(d.jsx)(cn,{visible:o,editing:b,onBeginEdit:!A&&function(){return f(!0)},onConfirmEdit:!A&&function(){E.forEach((function(n){var e=m[n];e!==t.values[n]&&C(t.id,n,e)})),f(!1)},onCancelEdit:!A&&T,onRemove:!A&&function(){k(t.id)},copyString:t.id})]})}var dn,bn,fn,jn,gn,mn,On=s.a.div($||($=Object(l.a)(["\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n  margin-bottom: 2px;\n"]))),vn=s.a.div(Q||(Q=Object(l.a)(["\n  cursor: default;\n  background-color: ",";\n  font-family: monospace, monospace;\n  padding: 0 8px;\n  border: 0.5px solid black;\n  border-radius: 4px 0 0 4px;\n  display: flex;\n  align-items: center;\n  align-self: stretch;\n"])),(function(n){var e=n.problem;return e===v?"salmon":e===p?"moccasin":e?"lightcyan":"lightgreen"})),pn=s.a.div(X||(X=Object(l.a)([""]))),hn=s.a.span(nn||(nn=Object(l.a)(["\n  cursor: default;\n  padding: 0 8px;\n  color: white;\n  background-color: black;\n"]))),xn=s.a.div(en||(en=Object(l.a)(["\n  display: flex;\n  flex-direction: row;\n  font-family: monospace, monospace;\n"]))),yn=s.a.div(tn||(tn=Object(l.a)(["\n  padding: 0 8px;\n  border: 0.5px solid black;\n  ","\n"])),(function(n){var e=n.value,t=n.highlight;return void 0===e||null===e?"background-color: red; color: white; font-style: italic; font-family: sans-serif, monospace;":e.trim()?t?"background-color: lightcyan;":"":"background-color: orange;"})),En=s.a.textarea(an||(an=Object(l.a)(["\n  font-size: 16px;\n"])));function Cn(n){var e=n.node,t=Object(c.useState)(!e.id),a=Object(u.a)(t,2),i=a[0],o=a[1],r=Object(c.useState)(!1),l=Object(u.a)(r,2),s=l[0],b=l[1],f=Object(c.useState)(),j=Object(u.a)(f,2),g=j[0],O=j[1],x=Object(c.useState)(""),y=Object(u.a)(x,2),E=y[0],C=y[1],k=Object(c.useContext)(S),w=k.onAdd,A=k.onRemove,T=k.problematicTranslations,D=k.disabled,M=Object(c.useCallback)((function(){O(void 0),C("")}),[]);Object(c.useEffect)((function(){i&&!D||M()}),[D,i,M]),q(g&&M);var L=T.filter((function(n){return n.id.startsWith(e.id)})).map((function(n){return n.problem})),U=L.includes(v)?v:L.includes(p)?p:L.includes(h)?h:void 0,V=E&&/^\w+$/.test(E)&&!e.children.some((function(n){return n.name===E})),I=V?function(){w(e.id,g,E),M()}:void 0;return Object(d.jsxs)(d.Fragment,{children:[Object(d.jsxs)(Sn,{onClick:function(){return o((function(n){return!n}))},onMouseEnter:function(){return b(!0)},onMouseLeave:function(){return b(!1)},children:[Object(d.jsxs)(Rn,{id:e.id,problem:U,expanded:i,title:e.id,children:[Object(d.jsx)(Tn,{children:i?"-":"+"}),e.name]}),i?!g&&!D&&Object(d.jsx)(cn,{visible:s,onAdd:function(n){return O(n)},onRemove:e.id&&function(){return A(e.id)}}):Object(d.jsx)(Dn,{children:"{} ".concat(e.children.length," item").concat(1===e.children.length?"":"s")})]}),g?Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)(Nn,{type:"text",autoFocus:!0,placeholder:g===m.NodeType.OBJECT?"new section":"new value",onChange:function(n){return C(n.target.value.trim())},onKeyPress:function(n){return"Enter"===n.key&&(null===I||void 0===I?void 0:I())}}),V?Object(d.jsx)(_,{onClick:I,children:Object(d.jsx)("img",{src:N,width:"16",alt:"confirm"})}):null,Object(d.jsx)(_,{onClick:M,children:Object(d.jsx)("img",{src:P,width:"16",alt:"cancel"})})]}):null,Object(d.jsx)(Mn,{children:Object(d.jsx)(R.a,{expanded:i,children:e.children.map((function(n){return n.type===m.NodeType.OBJECT?Object(d.jsx)(Cn,{node:n},n.id):Object(d.jsx)(sn,{node:n},n.id)}))})})]})}var kn,wn,An,Sn=s.a.div(dn||(dn=Object(l.a)(["\n  cursor: default;\n  position: relative;\n  display: flex;\n  flex-direction: row;\n"]))),Tn=s.a.span(bn||(bn=Object(l.a)(["\n  min-width: 10px;\n  margin-right: 2px;\n"]))),Rn=s.a.span(fn||(fn=Object(l.a)(["\n  background-color: ",";\n  font-family: monospace, monospace;\n  padding: 0 8px;\n  border: 0.5px solid black;\n  border-radius: 4px;\n\n  &:hover {\n    font-weight: bold;\n  }\n"])),(function(n){var e=n.id,t=n.problem,a=n.expanded;if(!e)return"white";switch(t){case v:return a?"pink":"salmon";case p:return a?"white":"moccasin";case h:return a?"white":"lightcyan";default:return a?"mintcream":"lightgreen"}})),Dn=s.a.span(jn||(jn=Object(l.a)(["\n  color: grey;\n  margin: 0 8px;\n"]))),Mn=s.a.div(gn||(gn=Object(l.a)(["\n  padding-left: 20px;\n  margin-bottom: 4px;\n"]))),Nn=s.a.input(mn||(mn=Object(l.a)(["\n  font-family: monospace, monospace;\n  font-size: 16px;\n  padding: 0 8px;\n  margin-left: 20px;\n  margin-bottom: 4px;\n"])));function Pn(n){var e=n.data,t=n.onSendMessage,a=n.disabled,i=Object(c.useState)(e),o=Object(u.a)(i,2),r=o[0],l=o[1];Object(c.useEffect)((function(){l(e)}),[e]);var s=Object(c.useState)([]),b=Object(u.a)(s,2),f=b[0],j=b[1];return Object(c.useEffect)((function(){var n;(null===r||void 0===r||null===(n=r.languages)||void 0===n?void 0:n.length)&&j(C(r.content,r.languages))}),[r]),Object(d.jsx)(S.Provider,{value:{disabled:a,problematicTranslations:f,languages:null===r||void 0===r?void 0:r.languages,onAdd:function(n,e,a){return t(m.Action.add(n,e,a))},onChangeValue:function(n,e,a){return t(m.Action.changeValue(n,e,a))},onRemove:function(n){return t(m.Action.remove(n))}},children:r?Object(d.jsx)(Cn,{node:r.content}):null})}function Ln(){var n=function(){var n=new URL(window.location.href),e=n.searchParams.get("serverPort")||n.port;return"".concat(n.hostname,":").concat(e)}(),e=Object(c.useState)(),t=Object(u.a)(e,2),a=t[0],i=t[1],o=Object(c.useCallback)((function(n){switch(n.action){case m.ActionType.DATA_UPDATE:i(n.data);break;default:console.error("Invalid action:",n.action)}}),[]),r=g()("ws://".concat(n),{retryOnError:!0,shouldReconnect:function(){return!0},reconnectAttempts:100,onMessage:function(n){return o(JSON.parse(n.data))}}),l=r.sendMessage,s=r.readyState,f=Object(c.useCallback)((function(){switch(s){case j.ReadyState.OPEN:return"Connected";case j.ReadyState.CONNECTING:return"Connecting";case j.ReadyState.CLOSED:return"Server not reachable";default:return"Unknown"}}),[s]),O=Object(c.useCallback)((function(n){l(JSON.stringify(n))}),[l]);return Object(c.useEffect)((function(){s===j.ReadyState.OPEN&&fetch("http://".concat(n,"/data")).then((function(n){return n.json()})).then(i)}),[s,n]),Object(d.jsxs)(Un,{children:[Object(d.jsx)(_n,{status:s,children:f()}),Object(d.jsxs)(Vn,{children:[!a&&"No data",Object(d.jsx)(Pn,{data:a,onSendMessage:O,disabled:s!==j.ReadyState.OPEN})]}),Object(d.jsx)(b,{})]})}var Un=s.a.div(kn||(kn=Object(l.a)(['\n  background-color: #ffffff;\n  display: flex;\n  flex-direction: column;\n  min-height: 100vh;\n\n  font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", "Roboto", "Oxygen",\n    "Ubuntu", "Cantarell", "Fira Sans", "Droid Sans", "Helvetica Neue",\n    sans-serif;\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n  font-weight: 400;\n']))),Vn=s.a.div(wn||(wn=Object(l.a)(["\n  flex: 1;\n  min-width: 800px;\n  max-width: 95vw;\n  margin: 0 40px;\n  padding-top: 15px;\n  flex-direction: column;\n  align-items: center;\n"]))),_n=s.a.div(An||(An=Object(l.a)(["\n  color: ",";\n"])),(function(n){var e=n.status;return e===j.ReadyState.OPEN?"darkgreen":e===j.ReadyState.CONNECTING?"black":"darkred"}));r.a.render(Object(d.jsx)(i.a.StrictMode,{children:Object(d.jsx)(Ln,{})}),document.getElementById("root"))}},[[62,1,2]]]);
//# sourceMappingURL=main.cd6a9349.chunk.js.map