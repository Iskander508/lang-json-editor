(this.webpackJsonplang_json_editor=this.webpackJsonplang_json_editor||[]).push([[0],{30:function(n,e,t){},5:function(n,e){var t={ADD:"ADD",CHANGE_VALUE:"CHANGE_VALUE",REMOVE:"REMOVE",DATA_UPDATE:"DATA_UPDATE"},a={add:function(n,e,a){return{action:t.ADD,parentId:n,type:e,label:a}},changeValue:function(n,e,a){return{action:t.CHANGE_VALUE,id:n,language:e,value:a}},remove:function(n){return{action:t.REMOVE,id:n}},dataUpdate:function(n){return{action:t.DATA_UPDATE,data:n}}};n.exports={NodeType:{OBJECT:"OBJECT",VALUE:"VALUE"},ActionType:t,Action:a}},59:function(n,e,t){"use strict";t.r(e);var a,c=t(0),i=t.n(c),o=t(20),r=t.n(o),s=(t(30),t(2)),u=t(4),l=t(3),d=t(1);function b(){var n=Object(c.useMemo)((function(){return(new Date).getFullYear()}),[]);return Object(d.jsx)(O,{children:"\xa9 Pavel Zarecky, ".concat(n)})}var j,f,g,O=l.a.div(a||(a=Object(s.a)(["\n  padding-right: 15px;\n  text-align: end;\n"]))),m=t(6),v=t.n(m),p=t(5),h=i.a.createContext({}),x=t(25),E=t.n(x),y=t.p+"static/media/add.d8693632.svg",C=t.p+"static/media/edit.962e7af9.svg",k=t.p+"static/media/confirm.0addefb3.svg",w=t.p+"static/media/cancel.caea72e4.svg",A=t.p+"static/media/trash.85c719f0.svg",S=t.p+"static/media/copy.2327b577.svg",T=t.p+"static/media/translate.e48065be.svg",D=l.a.span(j||(j=Object(s.a)(["\n  cursor: pointer;\n  vertical-align: middle;\n  padding: 0;\n  border: none;\n  background: none;\n  opacity: 0.5;\n  min-width: 1em;\n  margin: 0 3px;\n\n  &:hover {\n    opacity: 1;\n    font-weight: bold;\n  }\n\n  &:hover > * {\n    transform: scale(1.5, 1.5);\n  }\n"]))),N=t(24);function R(n){var e=n.operation,t=n.buttons,a=n.visible,c=void 0===a||a,i=n.copyString,o={opacity:c?1:0};return Object(d.jsxs)(L,{style:o,children:[e?Object(d.jsx)(P,{children:Object(d.jsx)("img",{src:e.image,width:"16",alt:e.name})}):null,t.map((function(n){return n?Object(d.jsxs)(D,{onClick:function(e){n.callback(),e.stopPropagation()},title:n.name,children:[n.image?Object(d.jsx)("img",{src:n.image,width:"12",alt:n.name}):null,n.text?n.text:null]},n.name):null})),i?Object(d.jsx)(N.CopyToClipboard,{text:i,title:'copy "'.concat(i,'"'),children:Object(d.jsx)(D,{children:Object(d.jsx)("img",{src:S,width:"12",alt:"copy ".concat(i)})})}):null]})}function M(n){var e=n.visible,t=n.onAdd,a=n.onRemove,c=n.onEdit,i=n.copyString;return Object(d.jsx)(R,{visible:e,buttons:[t&&{name:"add",image:y,callback:t},a&&{name:"remove",image:A,callback:a},c&&{name:"edit",image:C,callback:c}],copyString:i})}function U(n){var e=n.onConfirm,t=n.onCancel,a=n.editMode,c=a?"edit":"remove";return Object(d.jsx)(R,{operation:{name:c,image:a?C:A},buttons:[{name:"confirm ".concat(c),image:k,callback:e},{name:"cancel ".concat(c),image:w,callback:t}]})}function V(n){var e=n.onObject,t=n.onValue,a=n.onCancel;return Object(d.jsx)(R,{operation:{name:"add",image:y},buttons:[{name:"object",text:"{}",callback:e},{name:"string",text:'""',callback:t},{name:"cancel",image:w,callback:a}]})}var L=l.a.div(f||(f=Object(s.a)(["\n  cursor: default;\n"]))),P=l.a.span(g||(g=Object(s.a)(["\n  font-size: 10px;\n  opacity: 0.8;\n"]))),_=function(n){Object(c.useEffect)((function(){if(n){var e=function(e){27===e.keyCode&&n()};return window.addEventListener("keydown",e),function(){window.removeEventListener("keydown",e)}}}),[n])},B=function(){var n=new URL(window.location.href),e=n.searchParams.get("serverPort")||n.port;return"".concat(n.hostname,":").concat(e)},J="REMOVE_MODE",I="EDIT_MODE",F="ADD_MODE",G=function(n){var e=n.editing,t=n.visible,a=n.onAdd,i=n.onRemove,o=n.onConfirmEdit,r=n.onCancelEdit,s=n.onBeginEdit,l=n.copyString,b=Object(c.useState)(e?I:void 0),j=Object(u.a)(b,2),f=j[0],g=j[1];Object(c.useEffect)((function(){g(e?I:void 0)}),[e]);var O=function(n){for(var e=arguments.length,t=new Array(e>1?e-1:0),a=1;a<e;a++)t[a-1]=arguments[a];return function(){g(void 0),null===n||void 0===n||n.apply(void 0,t)}};switch(_(f&&O(f===I?r:void 0)),f){case F:return Object(d.jsx)(V,{onObject:O(a,p.NodeType.OBJECT),onValue:O(a,p.NodeType.VALUE),onCancel:O()});case J:case I:return Object(d.jsx)(U,{editMode:f===I,onConfirm:O(f===I?o:i),onCancel:O(f===I?r:void 0)});default:return Object(d.jsx)(M,{visible:t,copyString:l,onAdd:a&&function(){return g(F)},onRemove:i&&function(){return g(J)},onEdit:o&&function(){g(I),null===s||void 0===s||s()}})}};G.defaultProps={onBeginEdit:function(){}};var H,z,W,Y,Z,q,K=G,Q=t(9),X=t(13);function $(n){var e=n.language,t=n.editing,a=n.value,i=n.onChange,o=n.onEdit,r=n.hint,s=Object(c.useState)(!1),l=Object(u.a)(s,2),b=l[0],j=l[1];Object(c.useEffect)((function(){t||j(!1)}),[t]);var f=Object(c.useState)(!1),g=Object(u.a)(f,2),O=g[0],m=g[1];Object(c.useEffect)((function(){t&&r&&function(n,e,t){var a=new URL("http://".concat(B(),"/translate"));return a.search=new URLSearchParams({text:n,from:e,to:t}).toString(),fetch(a).then((function(n){return n.text()}))}(r.value,r.language,e).then(m).catch((function(n){return console.warn(n)}))}),[t,r,e]);var v=Object(c.useCallback)((function(){return o(!1)}),[o]);return _(t&&v),Object(d.jsxs)(dn,{value:a,children:[Object(d.jsx)(ln,{children:e}),t?Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)("textarea",{autoFocus:b,value:a||"",onChange:function(n){return i(n.target.value)}}),O?Object(d.jsx)(D,{title:'Use auto-translation: "'.concat(O,'"'),onClick:function(){return i(O)},children:Object(d.jsx)("img",{src:T,width:"12",alt:'Use auto-translation: "'.concat(O,'"')})}):null]}):Object(d.jsx)(bn,{value:a,onDoubleClick:function(){j(!0),o(!0)},children:null!==a&&void 0!==a?a:"<missing>"})]})}function nn(n){var e=n.node,t=Object(c.useState)(!1),a=Object(u.a)(t,2),i=a[0],o=a[1],r=Object(c.useState)(!1),s=Object(u.a)(r,2),l=s[0],b=s[1],j=Object(c.useState)(e.values),f=Object(u.a)(j,2),g=f[0],O=f[1],m=Object(c.useContext)(h),v=m.languages,p=m.onChangeValue,x=m.onRemove,E=m.missingTranslations.some((function(n){return n===e.id}));return Object(d.jsxs)(rn,{onMouseEnter:function(){return o(!0)},onMouseLeave:function(){return o(!1)},children:[Object(d.jsx)(sn,{title:e.id,missingTranslation:E,children:e.name}),Object(d.jsx)(un,{children:v.map((function(n){var t=Object.keys(g).find((function(e){return e!==n&&g[e]}));return Object(d.jsx)($,{language:n,editing:l,hint:t&&{language:t,value:g[t]},value:g[n],onChange:function(e){return O(Object(X.a)(Object(X.a)({},g),{},Object(Q.a)({},n,e)))},onEdit:function(n){b(n),n||O(e.values)}},n)}))}),Object(d.jsx)(K,{editing:l,onBeginEdit:function(){return b(!0)},onConfirmEdit:function(){v.forEach((function(n){var t=g[n];t!==e.values[n]&&p(e.id,n,t)})),b(!1)},onCancelEdit:function(){O(e.values),b(!1)},onRemove:function(){x(e.id)},copyString:e.id,visible:i})]})}var en,tn,an,cn,on,rn=l.a.div(H||(H=Object(s.a)(["\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n  margin-bottom: 2px;\n"]))),sn=l.a.div(z||(z=Object(s.a)(["\n  cursor: default;\n  background-color: ",";\n  font-family: monospace, monospace;\n  padding: 0 8px;\n  border: 0.5px solid black;\n  border-radius: 4px 0 0 4px;\n  display: flex;\n  align-items: center;\n  align-self: stretch;\n"])),(function(n){return n.missingTranslation?"salmon":"lightgreen"})),un=l.a.div(W||(W=Object(s.a)([""]))),ln=l.a.span(Y||(Y=Object(s.a)(["\n  cursor: default;\n  padding: 0 8px;\n  color: white;\n  background-color: black;\n"]))),dn=l.a.div(Z||(Z=Object(s.a)(["\n  display: flex;\n  flex-direction: row;\n  font-family: monospace, monospace;\n"]))),bn=l.a.div(q||(q=Object(s.a)(["\n  padding: 0 8px;\n  border: 0.5px solid black;\n  ","\n"])),(function(n){var e=n.value;return void 0===e||null===e?"background-color: red; color: white; font-style: italic;":e&&e.trim()?"":"background-color: orange;"}));function jn(n){var e=n.node,t=Object(c.useState)(!1),a=Object(u.a)(t,2),i=a[0],o=a[1],r=Object(c.useState)(!1),s=Object(u.a)(r,2),l=s[0],b=s[1],j=Object(c.useState)(),f=Object(u.a)(j,2),g=f[0],O=f[1],m=Object(c.useState)(""),v=Object(u.a)(m,2),x=v[0],y=v[1],C=Object(c.useContext)(h),A=C.onAdd,S=C.onRemove,T=C.missingTranslations.some((function(n){return n.startsWith(e.id)})),N=Object(c.useCallback)((function(){O(void 0),y("")}),[]);_(g&&N);var R=x&&!e.children.some((function(n){return n.name===x}));return Object(d.jsxs)(d.Fragment,{children:[Object(d.jsxs)(mn,{title:e.id,onClick:function(){return o((function(n){return!n}))},onMouseEnter:function(){return b(!0)},onMouseLeave:function(){return b(!1)},children:[Object(d.jsxs)(pn,{missingTranslation:T,expanded:i,children:[Object(d.jsx)(vn,{children:i?"-":"+"}),e.name]}),i?Object(d.jsx)(K,{visible:l,onAdd:function(n){return O(n)},onRemove:e.id&&function(){return S(e.id)}}):Object(d.jsx)(hn,{children:"{} ".concat(e.children.length," item").concat(1===e.children.length?"":"s")})]}),g?Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)("input",{type:"text",placeholder:g===p.NodeType.OBJECT?"new section":"new value",onChange:function(n){return y(n.target.value.trim())}}),R?Object(d.jsx)(D,{onClick:function(){A(e.id,g,x),N()},children:Object(d.jsx)("img",{src:k,width:"16",alt:"confirm"})}):null,Object(d.jsx)(D,{onClick:N,children:Object(d.jsx)("img",{src:w,width:"16",alt:"cancel"})})]}):null,Object(d.jsx)(xn,{children:Object(d.jsx)(E.a,{expanded:i,children:e.children.map((function(n){return n.type===p.NodeType.OBJECT?Object(d.jsx)(jn,{node:n},n.id):Object(d.jsx)(nn,{node:n},n.id)}))})})]})}var fn,gn,On,mn=l.a.div(en||(en=Object(s.a)(["\n  cursor: default;\n  position: relative;\n  display: flex;\n  flex-direction: row;\n"]))),vn=l.a.span(tn||(tn=Object(s.a)(["\n  min-width: 10px;\n  margin-right: 2px;\n"]))),pn=l.a.span(an||(an=Object(s.a)(["\n  background-color: ",";\n  font-family: monospace, monospace;\n  padding: 0 8px;\n  border: 0.5px solid black;\n  border-radius: 4px;\n\n  &:hover {\n    font-weight: bold;\n  }\n"])),(function(n){var e=n.missingTranslation,t=n.expanded;return e?t?"pink":"salmon":t?"mintcream":"lightgreen"})),hn=l.a.span(cn||(cn=Object(s.a)(["\n  color: grey;\n  margin: 0 8px;\n"]))),xn=l.a.div(on||(on=Object(s.a)(["\n  padding-left: 20px;\n  margin-bottom: 4px;\n"])));function En(n,e,t){switch(n.type){case p.NodeType.VALUE:e.some((function(e){return void 0===n.values[e]||null===n.values[e]}))&&t(n.id);break;case p.NodeType.OBJECT:n.children.forEach((function(n){return En(n,e,t)}));break;default:throw new Error("Invalid type: ".concat(n.type))}}function yn(n){var e=n.data,t=n.onSendMessage,a=Object(c.useState)(e),i=Object(u.a)(a,2),o=i[0],r=i[1];Object(c.useEffect)((function(){r(e)}),[e]);var s=Object(c.useState)([]),l=Object(u.a)(s,2),b=l[0],j=l[1];return Object(c.useEffect)((function(){var n;if(null===o||void 0===o||null===(n=o.languages)||void 0===n?void 0:n.length){var e=[];En(o.content,o.languages,(function(n){e.push(n)})),j(e)}}),[o]),Object(d.jsx)(h.Provider,{value:{missingTranslations:b,languages:null===o||void 0===o?void 0:o.languages,onAdd:function(n,e,a){return t(p.Action.add(n,e,a))},onChangeValue:function(n,e,a){return t(p.Action.changeValue(n,e,a))},onRemove:function(n){return t(p.Action.remove(n))}},children:o?Object(d.jsx)(jn,{node:o.content}):null})}function Cn(){var n=B(),e=Object(c.useState)(),t=Object(u.a)(e,2),a=t[0],i=t[1],o=Object(c.useCallback)((function(n){switch(n.action){case p.ActionType.DATA_UPDATE:i(n.data);break;default:console.error("Invalid action:",n.action)}}),[]),r=v()("ws://".concat(n),{retryOnError:!0,shouldReconnect:function(){return!0},reconnectAttempts:100,onMessage:function(n){return o(JSON.parse(n.data))}}),s=r.sendMessage,l=r.readyState,j=Object(c.useCallback)((function(){switch(l){case m.ReadyState.OPEN:return"Connected";case m.ReadyState.CONNECTING:return"Connecting";case m.ReadyState.CLOSED:return"Server not reachable";default:return"Unknown"}}),[l]),f=Object(c.useCallback)((function(n){s(JSON.stringify(n))}),[s]);return Object(c.useEffect)((function(){l===m.ReadyState.OPEN&&fetch("http://".concat(n,"/data")).then((function(n){return n.json()})).then(i)}),[l,n]),Object(d.jsxs)(kn,{children:[Object(d.jsx)(An,{status:l,children:j()}),Object(d.jsxs)(wn,{children:[!a&&"No data",Object(d.jsx)(yn,{data:a,onSendMessage:f})]}),Object(d.jsx)(b,{})]})}var kn=l.a.div(fn||(fn=Object(s.a)(['\n  background-color: #ffffff;\n  display: flex;\n  flex-direction: column;\n  min-height: 100vh;\n\n  font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", "Roboto", "Oxygen",\n    "Ubuntu", "Cantarell", "Fira Sans", "Droid Sans", "Helvetica Neue",\n    sans-serif;\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n  font-weight: 400;\n']))),wn=l.a.div(gn||(gn=Object(s.a)(["\n  flex: 1;\n  min-width: 800px;\n  max-width: 95vw;\n  margin: 0 40px;\n  padding-top: 15px;\n  flex-direction: column;\n  align-items: center;\n"]))),An=l.a.div(On||(On=Object(s.a)(["\n  color: ",";\n"])),(function(n){var e=n.status;return e===m.ReadyState.OPEN?"darkgreen":e===m.ReadyState.CONNECTING?"black":"darkred"}));r.a.render(Object(d.jsx)(i.a.StrictMode,{children:Object(d.jsx)(Cn,{})}),document.getElementById("root"))}},[[59,1,2]]]);
//# sourceMappingURL=main.453e5cbf.chunk.js.map