(this.webpackJsonplang_json_editor=this.webpackJsonplang_json_editor||[]).push([[0],{30:function(n,e,t){},5:function(n,e){var t={ADD:"ADD",CHANGE_VALUE:"CHANGE_VALUE",REMOVE:"REMOVE",DATA_UPDATE:"DATA_UPDATE"},a={add:function(n,e,a){return{action:t.ADD,parentId:n,type:e,label:a}},changeValue:function(n,e,a){return{action:t.CHANGE_VALUE,id:n,language:e,value:a}},remove:function(n){return{action:t.REMOVE,id:n}},dataUpdate:function(n){return{action:t.DATA_UPDATE,data:n}}};n.exports={NodeType:{OBJECT:"OBJECT",VALUE:"VALUE"},ActionType:t,Action:a}},59:function(n,e,t){"use strict";t.r(e);var a,c=t(0),o=t.n(c),i=t(20),r=t.n(i),l=(t(30),t(2)),u=t(4),d=t(3),s=t(1);function b(){var n=Object(c.useMemo)((function(){return(new Date).getFullYear()}),[]);return Object(s.jsx)(f,{children:"\xa9 Pavel Zarecky, ".concat(n)})}var f=d.a.div(a||(a=Object(l.a)(["\n  padding-right: 15px;\n  text-align: end;\n"]))),j=t(6),g=t.n(j),m=t(5),O="MISSING",p="EMPTY",v="SAME";function h(n,e,t){switch(n.type){case m.NodeType.VALUE:if(e.some((function(e){return void 0===n.values[e]||null===n.values[e]})))return t(n.id,O);if(e.some((function(e){return!n.values[e].trim()})))return t(n.id,p);if(Object.values(n.values).sort().some((function(n,e,t){return e&&n===t[e-1]})))return t(n.id,v);break;case m.NodeType.OBJECT:if(!n.children.length)return t(n.id,p);n.children.forEach((function(n){return h(n,e,t)}));break;default:throw new Error("Invalid type: ".concat(n.type))}}function x(n,e){var t=[];return h(n,e,(function(n,e){t.push({id:n,problem:e})})),t}var y,E,C,k=o.a.createContext({}),w=t(25),A=t.n(w),S=t.p+"static/media/add.d8693632.svg",T=t.p+"static/media/edit.962e7af9.svg",R=t.p+"static/media/confirm.0addefb3.svg",D=t.p+"static/media/cancel.caea72e4.svg",N=t.p+"static/media/trash.85c719f0.svg",M=t.p+"static/media/copy.2327b577.svg",U=t.p+"static/media/google-translate.0346cfbe.svg",L=d.a.span(y||(y=Object(l.a)(["\n  cursor: pointer;\n  vertical-align: middle;\n  padding: 0;\n  border: none;\n  background: none;\n  opacity: 0.5;\n  min-width: 1em;\n  margin: 0 3px;\n\n  &:hover {\n    opacity: 1;\n    font-weight: bold;\n  }\n\n  &:hover > * {\n    transform: scale(1.5, 1.5);\n  }\n"]))),V=t(24);function P(n){var e=n.operation,t=n.buttons,a=n.visible,c=void 0===a||a,o=n.copyString,i={opacity:c?1:0};return Object(s.jsxs)(J,{style:i,children:[e?Object(s.jsx)(F,{children:Object(s.jsx)("img",{src:e.image,width:"16",alt:e.name})}):null,t.map((function(n){return n?Object(s.jsxs)(L,{onClick:function(e){n.callback(),e.stopPropagation()},title:n.name,children:[n.image?Object(s.jsx)("img",{src:n.image,width:"12",alt:n.name}):null,n.text?n.text:null]},n.name):null})),o?Object(s.jsx)(V.CopyToClipboard,{text:o,title:'copy "'.concat(o,'"'),children:Object(s.jsx)(L,{children:Object(s.jsx)("img",{src:M,width:"12",alt:"copy ".concat(o)})})}):null]})}function _(n){var e=n.visible,t=n.onAdd,a=n.onRemove,c=n.onEdit,o=n.copyString;return Object(s.jsx)(P,{visible:e,buttons:[t&&{name:"add",image:S,callback:t},a&&{name:"remove",image:N,callback:a},c&&{name:"edit",image:T,callback:c}],copyString:o})}function I(n){var e=n.onConfirm,t=n.onCancel,a=n.editMode,c=a?"edit":"remove";return Object(s.jsx)(P,{operation:{name:c,image:a?T:N},buttons:[{name:"confirm ".concat(c),image:R,callback:e},{name:"cancel ".concat(c),image:D,callback:t}]})}function B(n){var e=n.onObject,t=n.onValue,a=n.onCancel;return Object(s.jsx)(P,{operation:{name:"add",image:S},buttons:[{name:"section",text:"{}",callback:e},{name:"value",text:'""',callback:t},{name:"cancel",image:D,callback:a}]})}var J=d.a.div(E||(E=Object(l.a)(["\n  cursor: default;\n"]))),F=d.a.span(C||(C=Object(l.a)(["\n  font-size: 10px;\n  opacity: 0.8;\n"]))),G=function(n){Object(c.useEffect)((function(){if(n){var e=function(e){27===e.keyCode&&n()};return window.addEventListener("keydown",e),function(){window.removeEventListener("keydown",e)}}}),[n])},z="REMOVE_MODE",H="EDIT_MODE",W="ADD_MODE",Y=function(n){var e=n.editing,t=n.visible,a=n.onAdd,o=n.onRemove,i=n.onConfirmEdit,r=n.onCancelEdit,l=n.onBeginEdit,d=n.copyString,b=Object(c.useState)(e?H:void 0),f=Object(u.a)(b,2),j=f[0],g=f[1];Object(c.useEffect)((function(){g(e?H:void 0)}),[e]);var O=function(n){for(var e=arguments.length,t=new Array(e>1?e-1:0),a=1;a<e;a++)t[a-1]=arguments[a];return function(){g(void 0),null===n||void 0===n||n.apply(void 0,t)}};switch(G(j&&O(j===H?r:void 0)),j){case W:return Object(s.jsx)(B,{onObject:O(a,m.NodeType.OBJECT),onValue:O(a,m.NodeType.VALUE),onCancel:O()});case z:case H:return Object(s.jsx)(I,{editMode:j===H,onConfirm:O(j===H?i:o),onCancel:O(j===H?r:void 0)});default:return Object(s.jsx)(_,{visible:t,copyString:d,onAdd:a&&function(){return g(W)},onRemove:o&&function(){return g(z)},onEdit:i&&function(){g(H),null===l||void 0===l||l()}})}};Y.defaultProps={onBeginEdit:function(){}};var K,Z,$,q,Q,X,nn,en=Y,tn=t(9),an=t(13);function cn(n){var e=n.text,t=n.fromLanguage,a=n.toLanguage,c=(n.onResult,"Open on GoogleTranslate");return Object(s.jsx)("a",{href:"https://translate.google.com/?sl=".concat(encodeURIComponent(t),"&tl=").concat(encodeURIComponent(a),"&text=").concat(encodeURIComponent(e)),target:"_blank",rel:"noreferrer",children:Object(s.jsx)(L,{title:c,children:Object(s.jsx)("img",{src:U,width:"12",alt:c})})})}function on(n){var e=n.language,t=n.editing,a=n.value,o=n.onChange,i=n.onEdit,r=n.hint,l=n.highlight,d=Object(c.useState)(!1),b=Object(u.a)(d,2),f=b[0],j=b[1],g=Object(c.useState)(!1),m=Object(u.a)(g,2),O=m[0],p=m[1],v=Object(c.useState)(),h=Object(u.a)(v,2),x=h[0],y=h[1];Object(c.useEffect)((function(){t||(j(!1),p(!1))}),[t]);var E=Object(c.useCallback)((function(){return i(!1)}),[i]);return G(t&&E),Object(s.jsxs)(pn,{value:a,children:[Object(s.jsx)(On,{children:e}),t?Object(s.jsxs)(s.Fragment,{children:[Object(s.jsx)(hn,{style:{width:x},onFocus:function(){return p(!0)},autoFocus:f,value:a||"",onChange:function(n){return o(n.target.value)}}),O&&r?Object(s.jsx)(cn,{text:r.value,fromLanguage:r.language,toLanguage:e}):null]}):Object(s.jsx)(vn,{value:a,highlight:l,onDoubleClick:function(){j(!0),i(!0)},ref:function(n){n&&y(n.offsetWidth)},children:(null===a||void 0===a?void 0:a.trim())?a:null===a||void 0===a?"<missing>":'"'.concat(a,'"')})]})}function rn(n){var e,t=n.node,a=Object(c.useState)(!1),o=Object(u.a)(a,2),i=o[0],r=o[1],l=Object(c.useState)(!1),d=Object(u.a)(l,2),b=d[0],f=d[1],j=Object(c.useState)(t.values),g=Object(u.a)(j,2),m=g[0],O=g[1],p=Object(c.useContext)(k),h=p.languages,x=p.onChangeValue,y=p.onRemove,E=null===(e=p.problematicTranslations.find((function(n){var e=n.id;n.problem;return e===t.id})))||void 0===e?void 0:e.problem;return Object(s.jsxs)(jn,{onMouseEnter:function(){return r(!0)},onMouseLeave:function(){return r(!1)},children:[Object(s.jsx)(gn,{title:t.id,problem:E,children:t.name}),Object(s.jsx)(mn,{children:h.map((function(n){var e=m[n],a=Object.keys(m).find((function(e){return e!==n&&m[e]})),c=E===v&&Object.keys(m).find((function(t){return t!==n&&m[t]===e}));return Object(s.jsx)(on,{language:n,editing:b,hint:a&&{language:a,value:m[a]},value:e,highlight:c,onChange:function(e){return O(Object(an.a)(Object(an.a)({},m),{},Object(tn.a)({},n,e)))},onEdit:function(n){f(n),n||O(t.values)}},n)}))}),Object(s.jsx)(en,{editing:b,onBeginEdit:function(){return f(!0)},onConfirmEdit:function(){h.forEach((function(n){var e=m[n];e!==t.values[n]&&x(t.id,n,e)})),f(!1)},onCancelEdit:function(){O(t.values),f(!1)},onRemove:function(){y(t.id)},copyString:t.id,visible:i})]})}var ln,un,dn,sn,bn,fn,jn=d.a.div(K||(K=Object(l.a)(["\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n  margin-bottom: 2px;\n"]))),gn=d.a.div(Z||(Z=Object(l.a)(["\n  cursor: default;\n  background-color: ",";\n  font-family: monospace, monospace;\n  padding: 0 8px;\n  border: 0.5px solid black;\n  border-radius: 4px 0 0 4px;\n  display: flex;\n  align-items: center;\n  align-self: stretch;\n"])),(function(n){var e=n.problem;return e===O?"salmon":e===p?"moccasin":e?"lightcyan":"lightgreen"})),mn=d.a.div($||($=Object(l.a)([""]))),On=d.a.span(q||(q=Object(l.a)(["\n  cursor: default;\n  padding: 0 8px;\n  color: white;\n  background-color: black;\n"]))),pn=d.a.div(Q||(Q=Object(l.a)(["\n  display: flex;\n  flex-direction: row;\n  font-family: monospace, monospace;\n"]))),vn=d.a.div(X||(X=Object(l.a)(["\n  padding: 0 8px;\n  border: 0.5px solid black;\n  ","\n"])),(function(n){var e=n.value,t=n.highlight;return void 0===e||null===e?"background-color: red; color: white; font-style: italic;":e.trim()?t?"background-color: lightcyan;":"":"background-color: orange;"})),hn=d.a.textarea(nn||(nn=Object(l.a)(["\n  font-size: 16px;\n"])));function xn(n){var e=n.node,t=Object(c.useState)(!e.id),a=Object(u.a)(t,2),o=a[0],i=a[1],r=Object(c.useState)(!1),l=Object(u.a)(r,2),d=l[0],b=l[1],f=Object(c.useState)(),j=Object(u.a)(f,2),g=j[0],h=j[1],x=Object(c.useState)(""),y=Object(u.a)(x,2),E=y[0],C=y[1],w=Object(c.useContext)(k),S=w.onAdd,T=w.onRemove,N=w.problematicTranslations;Object(c.useEffect)((function(){o||h(!1)}),[o]);var M=N.filter((function(n){return n.id.startsWith(e.id)})).map((function(n){return n.problem})),U=M.includes(O)?O:M.includes(p)?p:M.includes(v)?v:void 0,V=Object(c.useCallback)((function(){h(void 0),C("")}),[]);G(g&&V);var P=E&&/^\w+$/.test(E)&&!e.children.some((function(n){return n.name===E})),_=P?function(){S(e.id,g,E),V()}:void 0;return Object(s.jsxs)(s.Fragment,{children:[Object(s.jsxs)(kn,{onClick:function(){return i((function(n){return!n}))},onMouseEnter:function(){return b(!0)},onMouseLeave:function(){return b(!1)},children:[Object(s.jsxs)(An,{id:e.id,problem:U,expanded:o,title:e.id,children:[Object(s.jsx)(wn,{children:o?"-":"+"}),e.name]}),o?!g&&Object(s.jsx)(en,{visible:d,onAdd:function(n){return h(n)},onRemove:e.id&&function(){return T(e.id)}}):Object(s.jsx)(Sn,{children:"{} ".concat(e.children.length," item").concat(1===e.children.length?"":"s")})]}),g?Object(s.jsxs)(s.Fragment,{children:[Object(s.jsx)(Rn,{type:"text",autoFocus:!0,placeholder:g===m.NodeType.OBJECT?"new section":"new value",onChange:function(n){return C(n.target.value.trim())},onKeyPress:function(n){return"Enter"===n.key&&(null===_||void 0===_?void 0:_())}}),P?Object(s.jsx)(L,{onClick:_,children:Object(s.jsx)("img",{src:R,width:"16",alt:"confirm"})}):null,Object(s.jsx)(L,{onClick:V,children:Object(s.jsx)("img",{src:D,width:"16",alt:"cancel"})})]}):null,Object(s.jsx)(Tn,{children:Object(s.jsx)(A.a,{expanded:o,children:e.children.map((function(n){return n.type===m.NodeType.OBJECT?Object(s.jsx)(xn,{node:n},n.id):Object(s.jsx)(rn,{node:n},n.id)}))})})]})}var yn,En,Cn,kn=d.a.div(ln||(ln=Object(l.a)(["\n  cursor: default;\n  position: relative;\n  display: flex;\n  flex-direction: row;\n"]))),wn=d.a.span(un||(un=Object(l.a)(["\n  min-width: 10px;\n  margin-right: 2px;\n"]))),An=d.a.span(dn||(dn=Object(l.a)(["\n  background-color: ",";\n  font-family: monospace, monospace;\n  padding: 0 8px;\n  border: 0.5px solid black;\n  border-radius: 4px;\n\n  &:hover {\n    font-weight: bold;\n  }\n"])),(function(n){var e=n.id,t=n.problem,a=n.expanded;if(!e)return"white";switch(t){case O:return a?"pink":"salmon";case p:return a?"white":"moccasin";case v:return a?"white":"lightcyan";default:return a?"mintcream":"lightgreen"}})),Sn=d.a.span(sn||(sn=Object(l.a)(["\n  color: grey;\n  margin: 0 8px;\n"]))),Tn=d.a.div(bn||(bn=Object(l.a)(["\n  padding-left: 20px;\n  margin-bottom: 4px;\n"]))),Rn=d.a.input(fn||(fn=Object(l.a)(["\n  font-family: monospace, monospace;\n  font-size: 16px;\n  padding: 0 8px;\n  margin-left: 20px;\n  margin-bottom: 4px;\n"])));function Dn(n){var e=n.data,t=n.onSendMessage,a=Object(c.useState)(e),o=Object(u.a)(a,2),i=o[0],r=o[1];Object(c.useEffect)((function(){r(e)}),[e]);var l=Object(c.useState)([]),d=Object(u.a)(l,2),b=d[0],f=d[1];return Object(c.useEffect)((function(){var n;(null===i||void 0===i||null===(n=i.languages)||void 0===n?void 0:n.length)&&f(x(i.content,i.languages))}),[i]),Object(s.jsx)(k.Provider,{value:{problematicTranslations:b,languages:null===i||void 0===i?void 0:i.languages,onAdd:function(n,e,a){return t(m.Action.add(n,e,a))},onChangeValue:function(n,e,a){return t(m.Action.changeValue(n,e,a))},onRemove:function(n){return t(m.Action.remove(n))}},children:i?Object(s.jsx)(xn,{node:i.content}):null})}function Nn(){var n=function(){var n=new URL(window.location.href),e=n.searchParams.get("serverPort")||n.port;return"".concat(n.hostname,":").concat(e)}(),e=Object(c.useState)(),t=Object(u.a)(e,2),a=t[0],o=t[1],i=Object(c.useCallback)((function(n){switch(n.action){case m.ActionType.DATA_UPDATE:o(n.data);break;default:console.error("Invalid action:",n.action)}}),[]),r=g()("ws://".concat(n),{retryOnError:!0,shouldReconnect:function(){return!0},reconnectAttempts:100,onMessage:function(n){return i(JSON.parse(n.data))}}),l=r.sendMessage,d=r.readyState,f=Object(c.useCallback)((function(){switch(d){case j.ReadyState.OPEN:return"Connected";case j.ReadyState.CONNECTING:return"Connecting";case j.ReadyState.CLOSED:return"Server not reachable";default:return"Unknown"}}),[d]),O=Object(c.useCallback)((function(n){l(JSON.stringify(n))}),[l]);return Object(c.useEffect)((function(){d===j.ReadyState.OPEN&&fetch("http://".concat(n,"/data")).then((function(n){return n.json()})).then(o)}),[d,n]),Object(s.jsxs)(Mn,{children:[Object(s.jsx)(Ln,{status:d,children:f()}),Object(s.jsxs)(Un,{children:[!a&&"No data",Object(s.jsx)(Dn,{data:a,onSendMessage:O})]}),Object(s.jsx)(b,{})]})}var Mn=d.a.div(yn||(yn=Object(l.a)(['\n  background-color: #ffffff;\n  display: flex;\n  flex-direction: column;\n  min-height: 100vh;\n\n  font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", "Roboto", "Oxygen",\n    "Ubuntu", "Cantarell", "Fira Sans", "Droid Sans", "Helvetica Neue",\n    sans-serif;\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n  font-weight: 400;\n']))),Un=d.a.div(En||(En=Object(l.a)(["\n  flex: 1;\n  min-width: 800px;\n  max-width: 95vw;\n  margin: 0 40px;\n  padding-top: 15px;\n  flex-direction: column;\n  align-items: center;\n"]))),Ln=d.a.div(Cn||(Cn=Object(l.a)(["\n  color: ",";\n"])),(function(n){var e=n.status;return e===j.ReadyState.OPEN?"darkgreen":e===j.ReadyState.CONNECTING?"black":"darkred"}));r.a.render(Object(s.jsx)(o.a.StrictMode,{children:Object(s.jsx)(Nn,{})}),document.getElementById("root"))}},[[59,1,2]]]);
//# sourceMappingURL=main.2fea5d00.chunk.js.map