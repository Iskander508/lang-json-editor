(this.webpackJsonplang_json_editor=this.webpackJsonplang_json_editor||[]).push([[0],{30:function(n,e,t){},5:function(n,e){var t={ADD:"ADD",CHANGE_VALUE:"CHANGE_VALUE",REMOVE:"REMOVE",DATA_UPDATE:"DATA_UPDATE"},a={add:function(n,e,a){return{action:t.ADD,parentId:n,type:e,label:a}},changeValue:function(n,e,a){return{action:t.CHANGE_VALUE,id:n,language:e,value:a}},remove:function(n){return{action:t.REMOVE,id:n}},dataUpdate:function(n){return{action:t.DATA_UPDATE,data:n}}};n.exports={NodeType:{OBJECT:"OBJECT",VALUE:"VALUE"},ActionType:t,Action:a}},59:function(n,e,t){"use strict";t.r(e);var a,c=t(0),o=t.n(c),i=t(20),r=t.n(i),l=(t(30),t(2)),u=t(4),d=t(3),s=t(1);function b(){var n=Object(c.useMemo)((function(){return(new Date).getFullYear()}),[]);return Object(s.jsx)(f,{children:"\xa9 Pavel Zarecky, ".concat(n)})}var f=d.a.div(a||(a=Object(l.a)(["\n  padding-right: 15px;\n  text-align: end;\n"]))),j=t(6),g=t.n(j),O=t(5),m="MISSING",v="EMPTY",p="SAME";function h(n,e,t){switch(n.type){case O.NodeType.VALUE:if(e.some((function(e){return void 0===n.values[e]||null===n.values[e]})))return t(n.id,m);if(e.some((function(e){return!n.values[e].trim()})))return t(n.id,v);if(Object.values(n.values).sort().some((function(n,e,t){return e&&n===t[e-1]})))return t(n.id,p);break;case O.NodeType.OBJECT:if(!n.children.length)return t(n.id,v);n.children.forEach((function(n){return h(n,e,t)}));break;default:throw new Error("Invalid type: ".concat(n.type))}}function x(n,e){var t=[];return h(n,e,(function(n,e){t.push({id:n,problem:e})})),t}var y,E,C,k=o.a.createContext({}),w=t(25),A=t.n(w),S=t.p+"static/media/add.d8693632.svg",T=t.p+"static/media/edit.962e7af9.svg",R=t.p+"static/media/confirm.0addefb3.svg",D=t.p+"static/media/cancel.caea72e4.svg",N=t.p+"static/media/trash.85c719f0.svg",M=t.p+"static/media/copy.2327b577.svg",U=t.p+"static/media/google-translate.0346cfbe.svg",L=d.a.span(y||(y=Object(l.a)(["\n  cursor: pointer;\n  vertical-align: middle;\n  padding: 0;\n  border: none;\n  background: none;\n  opacity: 0.5;\n  min-width: 1em;\n  margin: 0 3px;\n\n  &:hover {\n    opacity: 1;\n    font-weight: bold;\n  }\n\n  &:hover > * {\n    transform: scale(1.5, 1.5);\n  }\n"]))),V=t(24);function P(n){var e=n.operation,t=n.buttons,a=n.visible,c=void 0===a||a,o=n.copyString,i={opacity:c?1:0};return Object(s.jsxs)(J,{style:i,children:[e?Object(s.jsx)(F,{children:Object(s.jsx)("img",{src:e.image,width:"16",alt:e.name})}):null,t.map((function(n){return n?Object(s.jsxs)(L,{onClick:function(e){n.callback(),e.stopPropagation()},title:n.name,children:[n.image?Object(s.jsx)("img",{src:n.image,width:"12",alt:n.name}):null,n.text?n.text:null]},n.name):null})),o?Object(s.jsx)(V.CopyToClipboard,{text:o,title:'copy "'.concat(o,'"'),children:Object(s.jsx)(L,{children:Object(s.jsx)("img",{src:M,width:"12",alt:"copy ".concat(o)})})}):null]})}function _(n){var e=n.visible,t=n.onAdd,a=n.onRemove,c=n.onEdit,o=n.copyString;return Object(s.jsx)(P,{visible:e,buttons:[t&&{name:"add",image:S,callback:t},a&&{name:"remove",image:N,callback:a},c&&{name:"edit",image:T,callback:c}],copyString:o})}function I(n){var e=n.onConfirm,t=n.onCancel,a=n.editMode,c=a?"edit":"remove";return Object(s.jsx)(P,{operation:{name:c,image:a?T:N},buttons:[{name:"confirm ".concat(c),image:R,callback:e},{name:"cancel ".concat(c),image:D,callback:t}]})}function B(n){var e=n.onObject,t=n.onValue,a=n.onCancel;return Object(s.jsx)(P,{operation:{name:"add",image:S},buttons:[{name:"object",text:"{}",callback:e},{name:"string",text:'""',callback:t},{name:"cancel",image:D,callback:a}]})}var J=d.a.div(E||(E=Object(l.a)(["\n  cursor: default;\n"]))),F=d.a.span(C||(C=Object(l.a)(["\n  font-size: 10px;\n  opacity: 0.8;\n"]))),G=function(n){Object(c.useEffect)((function(){if(n){var e=function(e){27===e.keyCode&&n()};return window.addEventListener("keydown",e),function(){window.removeEventListener("keydown",e)}}}),[n])},H="REMOVE_MODE",z="EDIT_MODE",Y="ADD_MODE",K=function(n){var e=n.editing,t=n.visible,a=n.onAdd,o=n.onRemove,i=n.onConfirmEdit,r=n.onCancelEdit,l=n.onBeginEdit,d=n.copyString,b=Object(c.useState)(e?z:void 0),f=Object(u.a)(b,2),j=f[0],g=f[1];Object(c.useEffect)((function(){g(e?z:void 0)}),[e]);var m=function(n){for(var e=arguments.length,t=new Array(e>1?e-1:0),a=1;a<e;a++)t[a-1]=arguments[a];return function(){g(void 0),null===n||void 0===n||n.apply(void 0,t)}};switch(G(j&&m(j===z?r:void 0)),j){case Y:return Object(s.jsx)(B,{onObject:m(a,O.NodeType.OBJECT),onValue:m(a,O.NodeType.VALUE),onCancel:m()});case H:case z:return Object(s.jsx)(I,{editMode:j===z,onConfirm:m(j===z?i:o),onCancel:m(j===z?r:void 0)});default:return Object(s.jsx)(_,{visible:t,copyString:d,onAdd:a&&function(){return g(Y)},onRemove:o&&function(){return g(H)},onEdit:i&&function(){g(z),null===l||void 0===l||l()}})}};K.defaultProps={onBeginEdit:function(){}};var W,Z,q,Q,X,$,nn=K,en=t(9),tn=t(13);function an(n){var e=n.text,t=n.fromLanguage,a=n.toLanguage,c=(n.onResult,"Open on GoogleTranslate");return Object(s.jsx)("a",{href:"https://translate.google.com/?sl=".concat(encodeURIComponent(t),"&tl=").concat(encodeURIComponent(a),"&text=").concat(encodeURIComponent(e)),target:"_blank",rel:"noreferrer",children:Object(s.jsx)(L,{title:c,children:Object(s.jsx)("img",{src:U,width:"12",alt:c})})})}function cn(n){var e=n.language,t=n.editing,a=n.value,o=n.onChange,i=n.onEdit,r=n.hint,l=n.highlight,d=Object(c.useState)(!1),b=Object(u.a)(d,2),f=b[0],j=b[1],g=Object(c.useState)(!1),O=Object(u.a)(g,2),m=O[0],v=O[1];Object(c.useEffect)((function(){t||(j(!1),v(!1))}),[t]);var p=Object(c.useCallback)((function(){return i(!1)}),[i]);return G(t&&p),Object(s.jsxs)(On,{value:a,children:[Object(s.jsx)(gn,{children:e}),t?Object(s.jsxs)(s.Fragment,{children:[Object(s.jsx)("textarea",{onFocus:function(){return v(!0)},autoFocus:f,value:a||"",onChange:function(n){return o(n.target.value)}}),m&&r?Object(s.jsx)(an,{text:r.value,fromLanguage:r.language,toLanguage:e}):null]}):Object(s.jsx)(mn,{value:a,highlight:l,onDoubleClick:function(){j(!0),i(!0)},children:(null===a||void 0===a?void 0:a.trim())?a:null===a||void 0===a?"<missing>":'"'.concat(a,'"')})]})}function on(n){var e,t=n.node,a=Object(c.useState)(!1),o=Object(u.a)(a,2),i=o[0],r=o[1],l=Object(c.useState)(!1),d=Object(u.a)(l,2),b=d[0],f=d[1],j=Object(c.useState)(t.values),g=Object(u.a)(j,2),O=g[0],m=g[1],v=Object(c.useContext)(k),h=v.languages,x=v.onChangeValue,y=v.onRemove,E=null===(e=v.problematicTranslations.find((function(n){var e=n.id;n.problem;return e===t.id})))||void 0===e?void 0:e.problem;return Object(s.jsxs)(bn,{onMouseEnter:function(){return r(!0)},onMouseLeave:function(){return r(!1)},children:[Object(s.jsx)(fn,{title:t.id,problem:E,children:t.name}),Object(s.jsx)(jn,{children:h.map((function(n){var e=O[n],a=Object.keys(O).find((function(e){return e!==n&&O[e]})),c=E===p&&Object.keys(O).find((function(t){return t!==n&&O[t]===e}));return Object(s.jsx)(cn,{language:n,editing:b,hint:a&&{language:a,value:O[a]},value:e,highlight:c,onChange:function(e){return m(Object(tn.a)(Object(tn.a)({},O),{},Object(en.a)({},n,e)))},onEdit:function(n){f(n),n||m(t.values)}},n)}))}),Object(s.jsx)(nn,{editing:b,onBeginEdit:function(){return f(!0)},onConfirmEdit:function(){h.forEach((function(n){var e=O[n];e!==t.values[n]&&x(t.id,n,e)})),f(!1)},onCancelEdit:function(){m(t.values),f(!1)},onRemove:function(){y(t.id)},copyString:t.id,visible:i})]})}var rn,ln,un,dn,sn,bn=d.a.div(W||(W=Object(l.a)(["\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n  margin-bottom: 2px;\n"]))),fn=d.a.div(Z||(Z=Object(l.a)(["\n  cursor: default;\n  background-color: ",";\n  font-family: monospace, monospace;\n  padding: 0 8px;\n  border: 0.5px solid black;\n  border-radius: 4px 0 0 4px;\n  display: flex;\n  align-items: center;\n  align-self: stretch;\n"])),(function(n){var e=n.problem;return e===m?"salmon":e===v?"moccasin":e?"lightcyan":"lightgreen"})),jn=d.a.div(q||(q=Object(l.a)([""]))),gn=d.a.span(Q||(Q=Object(l.a)(["\n  cursor: default;\n  padding: 0 8px;\n  color: white;\n  background-color: black;\n"]))),On=d.a.div(X||(X=Object(l.a)(["\n  display: flex;\n  flex-direction: row;\n  font-family: monospace, monospace;\n"]))),mn=d.a.div($||($=Object(l.a)(["\n  padding: 0 8px;\n  border: 0.5px solid black;\n  ","\n"])),(function(n){var e=n.value,t=n.highlight;return void 0===e||null===e?"background-color: red; color: white; font-style: italic;":e.trim()?t?"background-color: lightcyan;":"":"background-color: orange;"}));function vn(n){var e=n.node,t=Object(c.useState)(!e.id),a=Object(u.a)(t,2),o=a[0],i=a[1],r=Object(c.useState)(!1),l=Object(u.a)(r,2),d=l[0],b=l[1],f=Object(c.useState)(),j=Object(u.a)(f,2),g=j[0],h=j[1],x=Object(c.useState)(""),y=Object(u.a)(x,2),E=y[0],C=y[1],w=Object(c.useContext)(k),S=w.onAdd,T=w.onRemove,N=w.problematicTranslations.filter((function(n){return n.id.startsWith(e.id)})).map((function(n){return n.problem})),M=N.includes(m)?m:N.includes(v)?v:N.includes(p)?p:void 0,U=Object(c.useCallback)((function(){h(void 0),C("")}),[]);G(g&&U);var V=E&&!e.children.some((function(n){return n.name===E})),P=V?function(){S(e.id,g,E),U()}:void 0;return Object(s.jsxs)(s.Fragment,{children:[Object(s.jsxs)(yn,{onClick:function(){return i((function(n){return!n}))},onMouseEnter:function(){return b(!0)},onMouseLeave:function(){return b(!1)},children:[Object(s.jsxs)(Cn,{id:e.id,problem:M,expanded:o,title:e.id,children:[Object(s.jsx)(En,{children:o?"-":"+"}),e.name]}),o?Object(s.jsx)(nn,{visible:d,onAdd:function(n){return h(n)},onRemove:e.id&&function(){return T(e.id)}}):Object(s.jsx)(kn,{children:"{} ".concat(e.children.length," item").concat(1===e.children.length?"":"s")})]}),g?Object(s.jsxs)(s.Fragment,{children:[Object(s.jsx)("input",{type:"text",placeholder:g===O.NodeType.OBJECT?"new section":"new value",onChange:function(n){return C(n.target.value.trim())},onKeyPress:function(n){return"Enter"===n.key&&(null===P||void 0===P?void 0:P())}}),V?Object(s.jsx)(L,{onClick:P,children:Object(s.jsx)("img",{src:R,width:"16",alt:"confirm"})}):null,Object(s.jsx)(L,{onClick:U,children:Object(s.jsx)("img",{src:D,width:"16",alt:"cancel"})})]}):null,Object(s.jsx)(wn,{children:Object(s.jsx)(A.a,{expanded:o,children:e.children.map((function(n){return n.type===O.NodeType.OBJECT?Object(s.jsx)(vn,{node:n},n.id):Object(s.jsx)(on,{node:n},n.id)}))})})]})}var pn,hn,xn,yn=d.a.div(rn||(rn=Object(l.a)(["\n  cursor: default;\n  position: relative;\n  display: flex;\n  flex-direction: row;\n"]))),En=d.a.span(ln||(ln=Object(l.a)(["\n  min-width: 10px;\n  margin-right: 2px;\n"]))),Cn=d.a.span(un||(un=Object(l.a)(["\n  background-color: ",";\n  font-family: monospace, monospace;\n  padding: 0 8px;\n  border: 0.5px solid black;\n  border-radius: 4px;\n\n  &:hover {\n    font-weight: bold;\n  }\n"])),(function(n){var e=n.id,t=n.problem,a=n.expanded;if(!e)return"white";switch(t){case m:return a?"pink":"salmon";case v:return a?"white":"moccasin";case p:return a?"white":"lightcyan";default:return a?"mintcream":"lightgreen"}})),kn=d.a.span(dn||(dn=Object(l.a)(["\n  color: grey;\n  margin: 0 8px;\n"]))),wn=d.a.div(sn||(sn=Object(l.a)(["\n  padding-left: 20px;\n  margin-bottom: 4px;\n"])));function An(n){var e=n.data,t=n.onSendMessage,a=Object(c.useState)(e),o=Object(u.a)(a,2),i=o[0],r=o[1];Object(c.useEffect)((function(){r(e)}),[e]);var l=Object(c.useState)([]),d=Object(u.a)(l,2),b=d[0],f=d[1];return Object(c.useEffect)((function(){var n;(null===i||void 0===i||null===(n=i.languages)||void 0===n?void 0:n.length)&&f(x(i.content,i.languages))}),[i]),Object(s.jsx)(k.Provider,{value:{problematicTranslations:b,languages:null===i||void 0===i?void 0:i.languages,onAdd:function(n,e,a){return t(O.Action.add(n,e,a))},onChangeValue:function(n,e,a){return t(O.Action.changeValue(n,e,a))},onRemove:function(n){return t(O.Action.remove(n))}},children:i?Object(s.jsx)(vn,{node:i.content}):null})}function Sn(){var n=function(){var n=new URL(window.location.href),e=n.searchParams.get("serverPort")||n.port;return"".concat(n.hostname,":").concat(e)}(),e=Object(c.useState)(),t=Object(u.a)(e,2),a=t[0],o=t[1],i=Object(c.useCallback)((function(n){switch(n.action){case O.ActionType.DATA_UPDATE:o(n.data);break;default:console.error("Invalid action:",n.action)}}),[]),r=g()("ws://".concat(n),{retryOnError:!0,shouldReconnect:function(){return!0},reconnectAttempts:100,onMessage:function(n){return i(JSON.parse(n.data))}}),l=r.sendMessage,d=r.readyState,f=Object(c.useCallback)((function(){switch(d){case j.ReadyState.OPEN:return"Connected";case j.ReadyState.CONNECTING:return"Connecting";case j.ReadyState.CLOSED:return"Server not reachable";default:return"Unknown"}}),[d]),m=Object(c.useCallback)((function(n){l(JSON.stringify(n))}),[l]);return Object(c.useEffect)((function(){d===j.ReadyState.OPEN&&fetch("http://".concat(n,"/data")).then((function(n){return n.json()})).then(o)}),[d,n]),Object(s.jsxs)(Tn,{children:[Object(s.jsx)(Dn,{status:d,children:f()}),Object(s.jsxs)(Rn,{children:[!a&&"No data",Object(s.jsx)(An,{data:a,onSendMessage:m})]}),Object(s.jsx)(b,{})]})}var Tn=d.a.div(pn||(pn=Object(l.a)(['\n  background-color: #ffffff;\n  display: flex;\n  flex-direction: column;\n  min-height: 100vh;\n\n  font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", "Roboto", "Oxygen",\n    "Ubuntu", "Cantarell", "Fira Sans", "Droid Sans", "Helvetica Neue",\n    sans-serif;\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n  font-weight: 400;\n']))),Rn=d.a.div(hn||(hn=Object(l.a)(["\n  flex: 1;\n  min-width: 800px;\n  max-width: 95vw;\n  margin: 0 40px;\n  padding-top: 15px;\n  flex-direction: column;\n  align-items: center;\n"]))),Dn=d.a.div(xn||(xn=Object(l.a)(["\n  color: ",";\n"])),(function(n){var e=n.status;return e===j.ReadyState.OPEN?"darkgreen":e===j.ReadyState.CONNECTING?"black":"darkred"}));r.a.render(Object(s.jsx)(o.a.StrictMode,{children:Object(s.jsx)(Sn,{})}),document.getElementById("root"))}},[[59,1,2]]]);
//# sourceMappingURL=main.a235459d.chunk.js.map